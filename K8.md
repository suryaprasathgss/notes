# Kubernetes

Kubernetes is an open-source container orchestration platform from Google, that automates deployment, scaling and management of containerized applications across clusters.

_When you are using containerized application in projects, unlike Cloud service providers there is no Auto-Scaling & Load-Balancing of containers by default._

This platform orchestrates the connectivity between the containers and automatically scale up or down based on the load.

**Orchestration**
The whole process of automatically deploying and managing containers is known as container orchestration. Kubernetes is just a container orchestration technology.

_Docker Swarm - is Docker's own orchestration platform._

Advantages of Container Orchestration:
* Application becomes Highly Available.
* User traffic is Load-Balanced across various containers.
* When demand increases, Auto-Scale seamlessly.

All this can be achieved with a set of declarative object configuration files.

# Node
Node is a machine, physical/virtual on which Kubernetes is installed. \
Node is a worker machine in which containers will be launched by K8. \

_What if the node running your K8 application fails?_
Then obviously our application goes down, so we need multiple nodes which forms a **Cluster**.

**Master Node** is responsible for managing the cluster, which stores the info about the members(Nodes) of the cluster. It handles the self-healing, Load-Balancing & Auto-Scaling.

**Worker Node** is where our containers run. Not directly in the Node. Pods are created in which our containers are deployed.

The Master watches over the nodes in the cluster and is responsible for the actual orchestration of containers on the worker nodes.

When Kubernetes is installed, it get installed with the following components,
   * Master Node:
      * API Server (_Heart_)
      * Controller (Manager) - maintains the state(desire & actual)
      * Scheduler - responsible for distributing work across Nodes.
      * ETCD (_Brain_) - K8 DB(key-value store) stores the cluster data.
   * Worker Node:
      * Kubelet (_spy_) - monitors the containers crashes.
      * Container Runtime Interface - responsible for image pull, container start/stop
      * Pods (containers runs in it)

# Pod
Kubernetes do not deploy the container directly into worker Node. \
Containers are encapsulated into a kubernetes object known as pods. \
A Pod is a single instance of an application. Pod is the smallest object that you can create on your Kubernetes. \
Pods usually have a 1-to-1 relationship with the container running your application. \
A single pod can have multiple containers, usually they're not multiple containers of the same kind. (can have multiple containers for tightly coupled application). If our intention is to scale our application, then we need to create additional pods. \

# Kubectl
CLI utility to deploy & manage applications on a kubernetes cluster.

> `kubectl run nginx` - command deploys a docker container, it creates a pod automatically and deploys the nginx docker image in it.

# YAML

YAML is basically a human-readable data serialization format commonly used for configuration files. (used to represent data)

**Strings:**

Data stored in Key Value pair. \
KEY & VALUE can have spaces, thing is they should be enclosed within quotes. \
Value can be of any datatype.
```
Name: "Surya Prasath"
Age: 25
Height: 5.11
"Is Male": true
"Got girlfriend": null
```
`Note:` There should be a space between colon(:) and value. YAML uses spaces (not tabs) for indentation to show structure.

**Array:**

Lists(Arrays) are **ordered** set of items where **position matters** and items can be **duplicated**. \
(-)dash indicates that it is an elements of an array, should begin with (-)dash in new line.
```
Fruits: 
 - apple
 - banana
```
**Dictionary:**

Dictionaries are **unordered collection** of key-value pairs where keys are **unique** and **order doesn't matter**. \
Dictionaries are represented as mappings, which are collection of key-value pairs.

```
Batsman:
 - Striker:
    name: Surya Prasath
    age: 25
 - Non-Striker:
    name: Deepan
    age: 24
```

replication controllers & replicaset

kubernetes networking:
K8 expects us to setup networking,
   * all the containers/pods must be able to communicate with one another without NAT
   * All nodes can communicate with all containers and vice versa without NAT

**Kubernetes Services:**
Kubernetes Services enable communication between various components within and outside of the application. \
It helps us connect application together with other applications or users. It is what that establishes connection between FE, BE & DB applications (loose coupling)

Node's ports can be only in a valid range of 30,000 -to- 32,767

```
spec:
   type: <NodePort>/<ClusterIP>/<LoadBalancer>
```

